# Agent Instructions - Bluefin Firehose

**Project:** Bluefin Firehose (formerly Flatpak Firehose)  
**Status:** Under transformation (Phase 1 of 20 complete)  
**Last Updated:** 2026-02-02

---

## ğŸ“‹ Quick Reference

This project uses **bd** (beads) for issue tracking.

```bash
bd ready              # Find available work
bd show <id>          # View issue details
bd update <id> --status in_progress  # Claim work
bd close <id>         # Complete work
bd sync               # Sync with git
```

---

## ğŸ¯ Project Context

### What is Bluefin Firehose?

A specialized feed reader tracking **Flatpak applications** and **Homebrew packages** shipped with **Project Bluefin** - a cloud-native Linux workstation distribution.

### Transformation Status

**Before (Legacy):**
- Tracks 250 recently updated Flathub apps
- Flatpak-only support
- Generic Flathub branding

**Target (Bluefin):**
- Tracks 42 curated Flatpak apps (37 Core + 5 DX)
- Tracks Homebrew packages from Bluefin Brewfiles
- Project Bluefin branding
- Enhanced filtering (Core/DX, Flatpak/Homebrew)
- Featured app banner

**Current Progress:** 1/20 phases complete (5%)

---

## ğŸ—ï¸ Architecture Overview

### Tech Stack

- **Backend:** Go 1.21+ (data pipeline)
- **Frontend:** Astro 4+ (static site generation)
- **Styling:** Vanilla CSS (CSS variables for theming)
- **Deployment:** GitHub Pages (via GitHub Actions)
- **Issue Tracking:** Beads (bd)

### Data Flow (Target Architecture)

```
1. GitHub API: projectbluefin/common repo
   â”œâ”€â”€ Fetch Brewfiles (Flatpak app IDs + Homebrew packages)
   â””â”€â”€ Parse with regex: ^(flatpak|brew) "([^"]+)"$
   
2. Bluefin Fetcher (internal/bluefin/flatpaks.go)
   â”œâ”€â”€ Extract 42 Flatpak app IDs (37 Core + 5 DX)
   â””â”€â”€ Return structured list
   
3. Flathub API
   â”œâ”€â”€ Fetch specific apps by ID (not "recently-updated")
   â””â”€â”€ Enrich with appstream metadata
   
4. Homebrew Fetcher (internal/homebrew/homebrew.go)
   â”œâ”€â”€ Parse Homebrew Brewfiles
   â””â”€â”€ Fetch package metadata from formulae.brew.sh API
   
5. GitHub API (if GITHUB_TOKEN set)
   â”œâ”€â”€ Fetch release notes from source repositories
   â””â”€â”€ Enhance changelogs
   
6. Pipeline Output
   â”œâ”€â”€ Merge Flatpak + Homebrew data
   â”œâ”€â”€ Sort by update date
   â””â”€â”€ Write: src/data/apps.json
   
7. Astro Build
   â”œâ”€â”€ Import apps.json
   â”œâ”€â”€ Render static HTML with components
   â””â”€â”€ Deploy to GitHub Pages
```

---

## ğŸ“ Project Structure

```
flatpak-firehose/  (will be renamed to bluefin-firehose in Phase 16)
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ flatpak-firehose/
â”‚       â””â”€â”€ main.go                    # Pipeline orchestration
â”‚
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â””â”€â”€ models.go                  # Data structures (App, Release, etc.)
â”‚   â”‚
â”‚   â”œâ”€â”€ flathub/
â”‚   â”‚   â””â”€â”€ flathub.go                 # Flathub API client
â”‚   â”‚                                  # FetchAllApps(), enrichApp()
â”‚   â”‚
â”‚   â”œâ”€â”€ github/
â”‚   â”‚   â””â”€â”€ github.go                  # GitHub API client
â”‚   â”‚                                  # FetchReleases() for source repos
â”‚   â”‚
â”‚   â”œâ”€â”€ bluefin/                       # ğŸ†• Created in Phase 4
â”‚   â”‚   â””â”€â”€ flatpaks.go                # Bluefin Brewfile fetcher
â”‚   â”‚                                  # FetchBluefinFlatpaks()
â”‚   â”‚
â”‚   â””â”€â”€ homebrew/                      # ğŸ†• Created in Phase 9
â”‚       â””â”€â”€ homebrew.go                # Homebrew package fetcher
â”‚                                      # FetchBluefinHomebrewPackages()
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â””â”€â”€ index.astro                # Main page
â”‚   â”‚                                  # Layout, CSS, metadata
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ AppCard.astro              # Individual app/package card
â”‚   â”‚   â”œâ”€â”€ FilterBar.astro            # Filters (category, Core/DX, type)
â”‚   â”‚   â”œâ”€â”€ SearchBar.astro            # Search by app name
â”‚   â”‚   â”œâ”€â”€ KeyboardHelp.astro         # Keyboard shortcuts modal
â”‚   â”‚   â”œâ”€â”€ ThemeToggle.astro          # Light/dark theme switcher
â”‚   â”‚   â””â”€â”€ FeaturedAppBanner.astro    # ğŸ†• Created in Phase 14
â”‚   â”‚
â”‚   â””â”€â”€ data/
â”‚       â””â”€â”€ apps.json                  # Generated by Go pipeline
â”‚
â”œâ”€â”€ public/
â”‚   â””â”€â”€ bluefin-logo.svg               # ğŸ†• Added in Phase 2
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy.yml                 # CI/CD workflow
â”‚
â”œâ”€â”€ .beads/
â”‚   â””â”€â”€ issues.jsonl                   # Beads issue tracker
â”‚
â”œâ”€â”€ go.mod                             # Go dependencies
â”œâ”€â”€ package.json                       # Node dependencies
â”œâ”€â”€ astro.config.mjs                   # Astro config
â”œâ”€â”€ README.md                          # User-facing documentation
â””â”€â”€ AGENTS.md                          # This file (agent instructions)
```

---

## ğŸ§© Key Components

### Go Backend

#### 1. `cmd/flatpak-firehose/main.go`
**Purpose:** Pipeline orchestration

**Current:**
```go
func main() {
    // Fetch 250 recently updated apps from Flathub
    results := flathub.FetchAllApps(nil)
    
    // Enrich with GitHub releases (if GITHUB_TOKEN)
    github.EnrichWithReleases(results)
    
    // Write JSON
    writeJSON(results)
}
```

**Target (After Phase 6):**
```go
func main() {
    mode := flag.String("mode", "bluefin", "Mode: bluefin or legacy")
    flag.Parse()
    
    var appIDs []string
    if *mode == "bluefin" {
        list, _ := bluefin.FetchBluefinFlatpaks()
        appIDs = append(list.CoreApps, list.DxApps...)
    }
    
    results := flathub.FetchAllApps(appIDs)
    github.EnrichWithReleases(results)
    writeJSON(results)
}
```

**Target (After Phase 13):**
```go
func main() {
    // Fetch Bluefin Flatpaks
    flatpaks := bluefin.FetchBluefinFlatpaks()
    flatpakApps := flathub.FetchAllApps(flatpaks.AllApps())
    
    // Fetch Homebrew packages
    homebrewPkgs := homebrew.FetchBluefinHomebrewPackages()
    
    // Merge and enrich
    allApps := mergeApps(flatpakApps, homebrewPkgs)
    github.EnrichWithReleases(allApps)
    
    writeJSON(allApps)
}
```

---

#### 2. `internal/flathub/flathub.go`
**Purpose:** Flathub API integration

**Key Functions:**
- `FetchAllApps(appIDs []string)` - Main entry point
  - If `appIDs` is nil/empty: legacy mode (fetch recently-updated)
  - If `appIDs` provided: fetch specific apps
- `FetchRecentlyUpdated()` - Get 250 recent apps
- `FetchAppDetails(appID)` - Get appstream metadata
- `enrichApp(app)` - Enrich with details, releases
- `ExtractSourceRepo(details)` - Parse GitHub/GitLab URLs

**API Endpoints:**
- Collection: `https://flathub.org/api/v2/collection/recently-updated`
- Details: `https://flathub.org/api/v2/appstream/{app_id}`

**Phase 5 Changes:**
- Add optional `appIDs` parameter to `FetchAllApps()`
- Fetch specific apps when IDs provided
- Maintain backward compatibility

---

#### 3. `internal/bluefin/flatpaks.go` ğŸ†•
**Purpose:** Fetch Bluefin Flatpak list from Brewfiles

**Created in:** Phase 4

**Key Functions:**
```go
type FlatpakList struct {
    CoreApps []string  // 37 apps from system-flatpaks.Brewfile
    DxApps   []string  // 5 apps from system-dx-flatpaks.Brewfile
}

func FetchBluefinFlatpaks() (*FlatpakList, error)
func (f *FlatpakList) AllApps() []string
```

**Data Sources:**
- Repo: `projectbluefin/common`
- Files:
  - `system_files/bluefin/usr/share/ublue-os/homebrew/system-flatpaks.Brewfile`
  - `system_files/bluefin/usr/share/ublue-os/homebrew/system-dx-flatpaks.Brewfile`

**Parse Logic:**
- Regex: `^flatpak "([^"]+)"$`
- Extract app IDs (e.g., `org.mozilla.firefox`)

**Environment Variables:**
- `GITHUB_TOKEN` - Optional, for rate limits (60/hour â†’ 5000/hour)

---

#### 4. `internal/homebrew/homebrew.go` ğŸ†•
**Purpose:** Fetch Homebrew packages from Brewfiles

**Created in:** Phase 9

**Key Functions:**
```go
type Package struct {
    Name        string
    Description string
    Homepage    string
    Version     string
    License     string
    // ... Homebrew-specific fields
}

func FetchBluefinHomebrewPackages() ([]Package, error)
```

**Data Sources:**
- Repo: `projectbluefin/common`
- Files: `cli.Brewfile`, `fonts.Brewfile`, `ai-tools.Brewfile`, etc.
- Metadata API: `https://formulae.brew.sh/api/formula/{name}.json`

**Parse Logic:**
- Regex: `^brew "([^"]+)"$`
- Fetch metadata from Homebrew API
- Filter Linux-compatible packages only

---

#### 5. `internal/models/models.go`
**Purpose:** Data structures

**Current:**
```go
type App struct {
    ID           string
    Name         string
    Summary      string
    Icon         string
    Categories   []string
    IsVerified   bool
    Version      string
    ReleaseDate  string
    Releases     []Release
    SourceRepo   *SourceRepo
    // ... other fields
}

type Release struct {
    Version     string
    Date        time.Time
    Title       string
    Description string
    Type        string  // "appstream" or "github-release"
}
```

**Phase 10 Changes:**
```go
type App struct {
    // ... existing fields
    PackageType string `json:"packageType"` // "flatpak" or "homebrew"
    AppSet      string `json:"appSet"`      // "core" or "dx"
    
    // Homebrew-specific
    HomebrewName     string `json:"homebrewName,omitempty"`
    HomebrewFormula  string `json:"homebrewFormula,omitempty"`
    HomebrewHomepage string `json:"homebrewHomepage,omitempty"`
}
```

---

### Astro Frontend

#### 1. `src/pages/index.astro`
**Purpose:** Main page layout, styles, metadata

**Key Sections:**
- **Frontmatter:** Import data, calculate stats
- **HTML:** Header, sidebar, main content, footer
- **CSS:** Theme variables, layout, responsive design
- **JavaScript:** Keyboard navigation, theme toggle

**Layout:**
```html
<header>
  <logo> <title> <subtitle> <search> <theme-toggle> <help-button>
</header>

<main>
  <sidebar>
    <about-box>
    <featured-app-banner>  <!-- Phase 14 -->
    <filter-bar>           <!-- Filters -->
    <stats-section>
    <made-with-love>
  </sidebar>
  
  <content>
    <apps-grid>            <!-- Single-column flex (Phase 1) -->
      <app-card> ...
    </apps-grid>
  </content>
</main>

<footer>
  <metadata> <links>
</footer>
```

**CSS Variables:**
```css
:root {
  /* Current (Flathub colors) */
  --color-accent-emphasis: #4a90e2;
}

/* Phase 3: Update to Bluefin colors */
:root {
  --color-accent-emphasis: #6c7ae9;  /* Bluefin blue */
}
```

---

#### 2. `src/components/AppCard.astro`
**Purpose:** Individual app/package display

**Current Structure:**
```html
<article class="app-card" 
         data-verified="true|false"
         data-categories="Audio,Video"
         data-updated-at="2026-02-02">
  <header>
    <icon> <name> <verified-badge>
  </header>
  <summary>
  <metadata> (version, installs, favorites)
  <categories>
  <source-repo>
  <changelog-section> (collapsible)
</article>
```

**Phase 12 Changes:**
- Add `data-package-type="flatpak|homebrew"`
- Add `data-app-set="core|dx"`
- Show package type badge
- Conditional links (Flathub vs formulae.brew.sh)
- Display Homebrew-specific metadata

---

#### 3. `src/components/FilterBar.astro`
**Purpose:** Client-side filtering

**Current Filters:**
- Verification: All, Verified, Unverified
- Category: Dropdown with all unique categories
- Date: 24h, 7d, 30d, 90d

**Phase 7 Addition:**
- App Set: All, Core (37), DX (5)

**Phase 11 Addition:**
- Package Type: All, Flatpak, Homebrew

**Filter Logic:**
```javascript
function applyFilters() {
    const cards = document.querySelectorAll('.app-card');
    
    cards.forEach(card => {
        const verified = card.dataset.verified;
        const categories = card.dataset.categories;
        const updatedAt = card.dataset.updatedAt;
        const appSet = card.dataset.appSet;        // Phase 7
        const packageType = card.dataset.packageType;  // Phase 11
        
        // Apply filter logic...
    });
}
```

---

#### 4. `src/components/FeaturedAppBanner.astro` ğŸ†•
**Purpose:** Daily rotating featured app

**Created in:** Phase 14

**Selection Algorithm:**
```typescript
function selectFeaturedApp(apps: App[]): App {
    // Filter: verified + >1000 installs
    const eligible = apps.filter(app => 
        app.isVerified && 
        (app.installsLastMonth || 0) > 1000
    );
    
    // Deterministic by day (same all day)
    const dayOfYear = Math.floor(Date.now() / 86400000);
    const index = dayOfYear % eligible.length;
    return eligible[index];
}
```

**Design:**
```css
.featured-banner {
    background: linear-gradient(135deg, #6c7ae9 0%, #4285f4 100%);
    color: white;
    padding: 1.5rem;
    border-radius: 8px;
}
```

---

## ğŸ¨ Theming System

### Color Palette

**Current (Flathub):**
- Primary: `#4a90e2`
- Link: `#4a90e2`
- Success: `#3fb950`

**Target (Bluefin - Phase 3):**
- Primary: `#6c7ae9` (Bluefin blue)
- Secondary: `#4285f4`
- Success: `#3fb950` (keep)

### Theme Toggle

**Mechanism:**
1. Inline script in `<head>` prevents FOUC
2. Checks `localStorage.getItem('theme')`
3. Falls back to `prefers-color-scheme: dark`
4. Sets `data-theme="light|dark"` on `<html>`

**Keyboard Shortcut:** `t` key toggles theme

---

## ğŸ”§ Development Workflow

### Initial Setup

```bash
# Clone repository
git clone https://github.com/castrojo/flatpak-firehose.git
cd flatpak-firehose

# Install dependencies
go mod download
npm install

# Set GitHub token (optional but recommended)
export GITHUB_TOKEN=ghp_your_token_here
```

### Development Cycle

```bash
# Run Go pipeline (generates src/data/apps.json)
go run cmd/flatpak-firehose/main.go

# Start Astro dev server
npm run dev
# Visit: http://localhost:4321

# Make changes to components/pages
# Astro hot-reloads automatically
```

### Testing

```bash
# Full build
npm run build

# Preview built site
npm run preview
# Visit: http://localhost:4321

# Check output
ls -lh dist/
```

### Committing

```bash
# Stage changes
git add <files>

# Commit
git commit -m "Phase X: <description>"

# Close beads issue
bd close <issue-id> --reason="Completed: <summary>"

# Sync beads
bd sync

# Push
git push
```

---

## ğŸ” Common Tasks

### Task 1: Add a New Filter

**Example:** Add Core/DX filter (Phase 7)

1. **Update Data Model:**
   ```go
   // internal/models/models.go
   type App struct {
       // ... existing
       AppSet string `json:"appSet"` // "core" or "dx"
   }
   ```

2. **Set AppSet in Pipeline:**
   ```go
   // cmd/flatpak-firehose/main.go
   for _, app := range flatpaks.CoreApps {
       app.AppSet = "core"
   }
   for _, app := range flatpaks.DxApps {
       app.AppSet = "dx"
   }
   ```

3. **Add Data Attribute:**
   ```astro
   <!-- src/components/AppCard.astro -->
   <article data-app-set={app.appSet}>
   ```

4. **Update FilterBar:**
   ```astro
   <!-- src/components/FilterBar.astro -->
   <select id="app-set-filter">
     <option value="all">All Apps</option>
     <option value="core">Core (37)</option>
     <option value="dx">DX (5)</option>
   </select>
   ```

5. **Update Filter Logic:**
   ```javascript
   const appSetFilter = document.getElementById('app-set-filter').value;
   if (appSetFilter !== 'all' && card.dataset.appSet !== appSetFilter) {
       card.style.display = 'none';
   }
   ```

---

### Task 2: Add a New Package Source

**Example:** Add GitLab support (hypothetical)

1. **Update Models:**
   ```go
   type SourceRepo struct {
       Type  string  // "github", "gitlab", "other"
       URL   string
       Owner string
       Repo  string
   }
   ```

2. **Update Extractor:**
   ```go
   // internal/flathub/flathub.go
   func ExtractSourceRepo(details) *SourceRepo {
       if strings.Contains(url, "gitlab.com") {
           return extractGitLabRepo(url)
       }
   }
   ```

3. **Create GitLab Fetcher:**
   ```go
   // internal/gitlab/gitlab.go
   func FetchReleases(owner, repo string) ([]Release, error)
   ```

4. **Integrate in Pipeline:**
   ```go
   // cmd/flatpak-firehose/main.go
   if app.SourceRepo.Type == "gitlab" {
       releases, _ := gitlab.FetchReleases(...)
   }
   ```

---

### Task 3: Update Branding

**Example:** Change colors (Phase 3)

1. **Research Colors:**
   ```bash
   curl -s https://projectbluefin.io | grep -E 'color|#[0-9a-fA-F]{6}'
   ```

2. **Update CSS Variables:**
   ```css
   /* src/pages/index.astro */
   :root {
       --color-accent-emphasis: #6c7ae9;
       --color-text-link: #6c7ae9;
   }
   
   [data-theme="dark"] {
       --color-accent-emphasis: #8890ff;
   }
   ```

3. **Test Both Themes:**
   - Toggle with `t` key
   - Check contrast ratios (WCAG AA: 4.5:1 for normal text)

4. **Update Logo:**
   ```bash
   curl -o public/bluefin-logo.svg https://projectbluefin.io/favicons/favicon.svg
   ```

5. **Update Header:**
   ```astro
   <!-- src/pages/index.astro -->
   <h1>
     <img src="/bluefin-logo.svg" alt="Bluefin" style="height: 32px;" />
     Bluefin Firehose
   </h1>
   ```

---

## ğŸ› Debugging Guide

### Issue: Build Fails

**Symptom:** `npm run build` errors

**Check:**
1. Go pipeline succeeded?
   ```bash
   go run cmd/flatpak-firehose/main.go
   # Should output: src/data/apps.json
   ```

2. JSON is valid?
   ```bash
   jq '.' src/data/apps.json
   ```

3. Astro dependencies installed?
   ```bash
   npm install
   ```

---

### Issue: No Data in Dev Server

**Symptom:** Site loads but shows "0 apps"

**Check:**
1. Run Go pipeline first:
   ```bash
   go run cmd/flatpak-firehose/main.go
   ```

2. Verify JSON exists:
   ```bash
   ls -lh src/data/apps.json
   cat src/data/apps.json | jq '.apps | length'
   ```

3. Restart Astro dev server:
   ```bash
   npm run dev
   ```

---

### Issue: Rate Limit Errors

**Symptom:** `403 Forbidden` from GitHub API

**Solution:**
```bash
# Set GITHUB_TOKEN
export GITHUB_TOKEN=ghp_your_token_here

# Verify
echo $GITHUB_TOKEN

# Run pipeline
go run cmd/flatpak-firehose/main.go
```

**Check Rate Limit:**
```bash
curl -H "Authorization: token $GITHUB_TOKEN" \
     https://api.github.com/rate_limit
```

---

### Issue: Filters Not Working

**Symptom:** Clicking filters doesn't filter apps

**Check:**
1. JavaScript loaded?
   - Open browser console
   - Look for errors

2. Data attributes set?
   ```bash
   npm run build
   grep 'data-verified' dist/index.html
   ```

3. Filter event listeners attached?
   - Add `console.log()` in filter handler
   - Check browser console

---

### Issue: Keyboard Navigation Broken

**Symptom:** `j/k` keys don't work

**Check:**
1. KeyboardNavigator initialized?
   ```javascript
   console.log(navigator);  // Should show KeyboardNavigator instance
   ```

2. Items found?
   ```javascript
   console.log(navigator.items.length);  // Should be > 0
   ```

3. Focus context check working?
   - Don't navigate when typing in search bar
   - Check `isTypingContext()` logic

---

## ğŸ“Š Performance Optimization

### Go Pipeline

**Current Bottlenecks:**
- Network I/O (Flathub API, GitHub API)
- Serial processing

**Optimizations in Place:**
- Parallel fetching with goroutines
- Rate limiting (100ms delay between requests)
- Timeout handling

**Future Improvements:**
- Connection pooling
- Caching (Redis?) for dev environment
- Incremental updates (only fetch changed apps)

---

### Astro Build

**Current Performance:**
- ~1-2s build time
- Single page (no routing overhead)

**Optimizations:**
- Static site (no server-side rendering)
- Minimal JavaScript (vanilla, no frameworks)
- CSS variables (no Sass/PostCSS overhead)

---

## ğŸ§ª Testing Strategy

### Manual Testing Checklist

**Before Each Commit:**
- [ ] Build succeeds: `npm run build`
- [ ] No console errors in browser
- [ ] All filters work
- [ ] Search works
- [ ] Keyboard navigation works (j/k/o/?/t)
- [ ] Theme toggle works
- [ ] Responsive design (desktop/mobile)

**Before Each Phase Completion:**
- [ ] All phase objectives met
- [ ] Tests pass (when tests exist)
- [ ] Documentation updated
- [ ] No regressions in existing features

---

### Future: Automated Testing

**Planned (Post-Phase 20):**
- Go unit tests (`*_test.go`)
- Astro component tests (Vitest)
- E2E tests (Playwright)
- Visual regression tests
- Accessibility tests (axe-core)

---

## ğŸš€ Deployment

### GitHub Actions Workflow

**File:** `.github/workflows/deploy.yml`

**Triggers:**
- Push to `main` branch
- Daily at 6 AM UTC (cron)
- Manual dispatch

**Steps:**
1. Checkout code
2. Setup Go
3. Setup Node.js
4. Install dependencies
5. Run Go pipeline (with `GITHUB_TOKEN`)
6. Build Astro site
7. Deploy to GitHub Pages

**Environment Variables:**
- `GITHUB_TOKEN` - Automatically provided by Actions

---

### Manual Deployment

```bash
# Build locally
npm run build

# Preview
npm run preview

# Push to trigger workflow
git push origin main

# Or manually deploy dist/
# (not recommended - use Actions)
```

---

## ğŸ“ Issue Tracking with Beads

### Workflow

1. **Find Work:**
   ```bash
   bd ready
   ```

2. **View Details:**
   ```bash
   bd show flatpak-firehose-xyz
   ```

3. **Claim Issue:**
   ```bash
   bd update flatpak-firehose-xyz --status in_progress
   ```

4. **Work on Issue:**
   - Make changes
   - Test locally
   - Commit

5. **Close Issue:**
   ```bash
   bd close flatpak-firehose-xyz --reason="Completed: <summary>"
   ```

6. **Sync:**
   ```bash
   bd sync
   git push
   ```

---

### Current Issues

**See:** `.opencode/plans/BLUEFIN_TRANSFORMATION_PLAN.md`

**Quick Stats:**
- Total: 20 phases
- Complete: 1
- In Progress: 1
- Ready: 5
- Blocked: 13

---

## ğŸ“ Learning Resources

### Go Development
- [Go by Example](https://gobyexample.com/)
- [Effective Go](https://go.dev/doc/effective_go)

### Astro
- [Astro Docs](https://docs.astro.build/)
- [Astro Components](https://docs.astro.build/en/core-concepts/astro-components/)

### APIs
- [Flathub API v2](https://flathub.org/api/v2/docs)
- [GitHub REST API](https://docs.github.com/en/rest)
- [Homebrew Formula API](https://formulae.brew.sh/docs/api/)

### Project Bluefin
- [Website](https://projectbluefin.io)
- [GitHub](https://github.com/projectbluefin)
- [Docs](https://docs.projectbluefin.io/)

---

## ğŸ›‘ Landing the Plane (Session Completion)

**When ending a work session**, you MUST complete ALL steps below. Work is NOT complete until `git push` succeeds.

### MANDATORY WORKFLOW:

1. **File issues for remaining work** - Create issues for anything that needs follow-up
   ```bash
   bd create --title="..." --type=task --priority=2
   ```

2. **Run quality gates** (if code changed) - Tests, linters, builds
   ```bash
   npm run build  # Must succeed
   ```

3. **Update issue status** - Close finished work, update in-progress items
   ```bash
   bd close <id> <id> ...  # Close all completed issues
   bd update <id> --notes="Partial progress: ..."  # Update WIP
   ```

4. **PUSH TO REMOTE** - This is MANDATORY:
   ```bash
   git pull --rebase
   bd sync
   git push
   git status  # MUST show "up to date with origin"
   ```

5. **Clean up** - Clear stashes, prune remote branches
   ```bash
   git stash list  # Should be empty
   ```

6. **Verify** - All changes committed AND pushed
   ```bash
   git log origin/main..HEAD  # Should show nothing
   ```

7. **Hand off** - Provide context for next session
   - Update this file (AGENTS.md) if architecture changed
   - Update README.md if user-facing features changed
   - Document any blockers or decisions

### CRITICAL RULES:
- Work is NOT complete until `git push` succeeds
- NEVER stop before pushing - that leaves work stranded locally
- NEVER say "ready to push when you are" - YOU must push
- If push fails, resolve and retry until it succeeds

---

## ğŸ”— Quick Links

- **Current Site:** https://castrojo.github.io/flatpak-firehose/
- **GitHub Repo:** https://github.com/castrojo/flatpak-firehose
- **Project Bluefin:** https://projectbluefin.io
- **Bluefin Common:** https://github.com/projectbluefin/common
- **Transformation Plan:** `.opencode/plans/BLUEFIN_TRANSFORMATION_PLAN.md`

---

**Last Updated:** 2026-02-02  
**Next Steps:** Complete Phase 2 (logo), then Phase 3 (colors)
